# 画像連結アプリケーション - セットアップと使用方法

開発したアプリケーションは、前回作成した「動画フレーム抽出ツール」で作成した画像や、その他の画像ファイルを指定した方向に連結することができます。このアプリケーションについて、環境構築から実行までの手順を説明します。

## 1. 環境構築

### 必要なライブラリ

以下のライブラリが必要です：

bash

```bash
pip install pillow
```

- **pillow**: 画像処理用

tkinterはPythonの標準ライブラリなので、追加インストールは不要です。

## 2. プログラム構成

プログラムは単一のPythonファイルで、以下の2つの主要クラスで構成されています：

1. **ImageConcatenator**: 画像連結のコアロジックを担当
    - 画像の読み込み
    - 時系列順のソート
    - 指定方向への連結
    - 境界線の追加
2. **ImageConcatenatorApp**: Tkinter UIを実装
    - ファイル選択インターフェース
    - 連結方向選択
    - 境界線サイズ設定
    - 出力設定
    - 進捗表示

## 3. 使用方法

1. プログラムを実行すると、以下の機能を持つGUIが表示されます：
    - **画像ファイル選択**: 複数の画像ファイルを選択（JPG/PNGなど）
    - **連結方向選択**:
        - 上から下：垂直方向に連結
        - 左から右：水平方向に連結
        - 右から左：水平方向に逆順で連結
        - ジグザグ：2行に分けて1行目は左から右、2行目は右から左
    - **境界線サイズ設定**: 画像間の黒い境界線の幅（0～50px）
    - **出力ファイル設定**: 連結後の画像の保存先
2. 画像ファイルを選択すると、ファイル名から時系列順にソートされてリストに表示されます。
3. 連結方向と境界線サイズを設定し、出力ファイルを指定した後、「画像を連結」ボタンをクリックします。
4. 処理中は進捗バーと状況メッセージで進行状況が表示されます。
5. 処理が完了すると、結果メッセージが表示されます。

## 4. 時系列ソートについて

このアプリケーションは、前回作成した「動画フレーム抽出ツール」で生成されたファイル名の形式（`frame_000123_0-00-05.jpg`など）を想定して、時系列順にソートする機能を実装しています。

ソートの優先順位：

1. ファイル名から時間情報（0-00-05など）を抽出
2. 上記が取得できない場合、フレーム番号（000123など）を使用
3. どちらも取得できない場合、ファイルの作成日時を使用

## 5. 連結方向の詳細

1. **上から下**:
    - 各画像は横幅を最大幅に合わせて中央寄せされます
    - 画像間に指定サイズの黒い境界線が入ります
2. **左から右**:
    - 各画像は高さを最大高さに合わせて中央寄せされます
    - 画像間に指定サイズの黒い境界線が入ります
3. **右から左**:
    - 左から右と同様ですが、画像の順序が逆になります
4. **ジグザグ（左右交互、2行）**:
    - 画像を2行に分割します
    - 1行目は左から右に配置
    - 2行目は右から左に配置
    - 2行の間にも指定サイズの黒い境界線が入ります

## 6. 注意事項

- 大量の高解像度画像を処理する場合、メモリ使用量が増加する可能性があります
- 出力ファイルの形式は、指定した拡張子（.png、.jpgなど）に応じて自動的に決定されます
- 処理中は「停止」ボタンで中断することができます

## 7. 活用例

- 動画から抽出した連続フレームをタイムライン形式で表示
- スライドショーやストーリーボードの作成
- 複数の画像を一つのドキュメントにまとめる
- 比較分析用の画像シートの作成

このアプリケーションを使えば、前回作成した動画フレーム抽出ツールで生成した画像を、簡単に見やすい形式で連結することができます。